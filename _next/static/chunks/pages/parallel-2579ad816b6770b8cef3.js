(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[469],{3632:function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Clock=void 0;var t=function(){function e(e,a,t){void 0===t&&(t=1),this.stateTime=e,this.getRealTime=a,this.stateTimeVelocity=t,this.changePeriodRealTime=0,this.changePerRealTime=0,this.waitSet=new Set,this.realTimeAtStateTime=this.getRealTime()}return e.prototype.getRealTimePassed=function(e){return e-this.realTimeAtStateTime},e.prototype.getPassedChangePeriod=function(e){return Math.min(this.changePeriodRealTime,e)},e.prototype.computeStateTime=function(e,a){return this.stateTime+e*this.stateTimeVelocity+a*this.changePerRealTime},e.prototype.beforeChange=function(e){var a=this,t=this.getPassedChangePeriod(e);this.stateTime=this.computeStateTime(e,t),this.waitSet.forEach((function(e){e.waitTime-=a.stateTime-e.startTime,e.startTime=a.stateTime})),this.changePeriodRealTime-=t,this.realTimeAtStateTime+=e},e.prototype.afterChange=function(){var e=this;this.waitSet.forEach((function(a){clearTimeout(a.timeoutRef),a.timeoutRef=e.createWaitTimeout(a.callback,a.waitTime)}))},e.prototype.createWaitTimeout=function(e,a){return setTimeout(e,Math.max(0,Math.ceil(this.calculateRealTimeLeftTo(a))))},e.prototype.calculateRealTimeLeftTo=function(e){var a,t=this.stateTimeVelocity+this.changePerRealTime,n=t*this.changePeriodRealTime;if(e>n){var s=e-n;a=this.changePeriodRealTime+s/this.stateTimeVelocity}else a=e/t;return a},e.prototype.change=function(e,a){if(void 0===a&&(a=.1),a>1&&e<0)throw new Error("changeRate should no be over 1 when the offset is negative. We can't go backwards in time.");var t=this.getRealTimePassed(this.getRealTime());this.beforeChange(t),this.changePerRealTime=e<0?-Math.abs(a):Math.abs(a),this.changePeriodRealTime=e/this.changePerRealTime,this.afterChange()},e.prototype.wait=function(e){var a=this;return new Promise((function(t){var n=a.getRealTimePassed(a.getRealTime());a.beforeChange(n);var s=function(){a.waitSet.delete(o),t()},o={timeoutRef:a.createWaitTimeout(s,e),callback:s,waitTime:e,startTime:a.computeCurrentTime(n)};a.waitSet.add(o)}))},e.prototype.computeCurrentTime=function(e){return this.computeStateTime(e,this.getPassedChangePeriod(e))},e.prototype.getCurrentTime=function(){return this.computeCurrentTime(this.getRealTimePassed(this.getRealTime()))},e.prototype.jump=function(e){if(e<0)throw"can't jump backwards in state time";var a=this.getRealTimePassed(this.getRealTime());this.stateTime+=e,this.beforeChange(a),this.afterChange()},e.prototype.setVelocity=function(e){if(e<0)throw new Error("velocity can't be negative");var a=this.getRealTimePassed(this.getRealTime());this.beforeChange(a),this.stateTimeVelocity=e,this.afterChange()},e.prototype.getVelocity=function(){return this.stateTimeVelocity},e.prototype.destroy=function(){this.waitSet.forEach((function(e){clearTimeout(e.timeoutRef)}))},e}();a.Clock=t},3349:function(e,a,t){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,a,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return a[t]}})}:function(e,a,t,n){void 0===n&&(n=t),e[n]=a[t]}),s=this&&this.__exportStar||function(e,a){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(a,t)||n(a,e,t)};Object.defineProperty(a,"__esModule",{value:!0}),s(t(3632),a),s(t(9676),a),s(t(834),a)},9676:function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0})},834:function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Universe=void 0;var t=function(){function e(e,a,t,n){this.createStore=e,this.compareAction=a,this.historyDuration=t,this.onChange=n,this.history=[],this.baseHelper1=e(),this.baseHelper2=e()}return e.prototype.removeOldElements=function(e){for(var a=0;a<this.history.length-1&&e-this.history[a+1].time>this.historyDuration;)a++;this.history.splice(0,a)},e.prototype.insert=function(e,a,t,n){var s;if(this.removeOldElements(a),null==t)t=a;else if(t>a)throw"time (".concat(t,") can't be bigger then current time (").concat(a,") (maybe jump the clock forwards?)");var o,c=this.findEntryIndexBefore(t,e);if(-1===c)return!1;var p=0;if(-2===c){if(null==n)throw"unable to insert action at time: ".concat(t," (too old)");c=-1}else{var r=this.history[c];o=r.result,p=t-r.time}return null==n&&(n=this.createStore()).update(o,p,e,void 0,void 0),this.history.splice(c+1,0,{action:e,time:t,result:n,deltaTime:p}),this.recalculateAfter(c+1,null===(s=this.history[c])||void 0===s?void 0:s.result),!0},e.prototype.recalculateAfter=function(e,a){if(e<this.history.length-1){var t=this.history[e],n=this.history[e+1],s=n.time-t.time,o=this.baseHelper1===a?this.baseHelper2:this.baseHelper1;o.copyFrom(n.result),n.result.update(t.result,s,n.action,n.deltaTime,a),this.recalculateAfter(e+1,o)}else this.onChange&&this.onChange()},e.prototype.findEntryIndexBefore=function(e,a){for(var t=this.history.length-1;t>=0;t--){var n=this.history[t];if(n.time<=e){if(n.time===e&&null!=a){var s=this.compareAction(n.action,a);if(s>0)continue;if(0===s)return-1}return t}}return-2},e.prototype.applyStateAt=function(e,a,t){if(t<a.time)throw"can't extrapolate state into the past";e.update(a.result,t-a.time,void 0,void 0,void 0)},e.prototype.applyCurrentState=function(e,a){this.applyStateAt(e,this.history[this.history.length-1],a)},e}();a.Universe=t},9138:function(e,a,t){"use strict";t.d(a,{$:function(){return c}});var n=t(5675),s=t(5893),o=function(e){var a=e.src;return"/co-consistent".concat(a)};function c(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex-grow-1"}),(0,s.jsx)("footer",{className:"bg-light",children:(0,s.jsxs)("div",{className:"d-flex align-items-center justify-content-around p-3 container-lg",children:[(0,s.jsxs)("a",{target:"_blank",href:"https://github.com/cocoss-org/co-consistent",className:"mx-2 text-black d-flex flex-row align-items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-github mx-2",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})}),(0,s.jsx)("span",{className:"h5 mb-0",children:"Github"})]}),(0,s.jsx)("a",{className:"d-flex mx-2",target:"_blank",href:"https://www.coconut-xr.com/",children:(0,s.jsx)(n.default,{loader:o,layout:"fixed",width:170,height:40,src:"/powered-by.svg"})})]})})]})}},1655:function(e,a,t){"use strict";t.d(a,{h:function(){return p}});var n=t(1664),s=t(7294),o=t(5893),c=[{title:"State",url:"/state"},{title:"Parallel",url:"/parallel"},{title:"Continous",url:"/continous"}];function p(e){var a=e.selectedIndex,t=(0,s.useState)(!1),p=t[0],r=t[1];return(0,o.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:(0,o.jsxs)("div",{className:"container-fluid",children:[(0,o.jsx)(n.default,{href:"/",passHref:!0,children:(0,o.jsx)("a",{className:"navbar-brand",children:"co-consistent examples"})}),(0,o.jsx)("button",{className:"navbar-toggler",type:"button",onClick:function(){return r(!p)},"data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,o.jsx)("span",{className:"navbar-toggler-icon"})}),(0,o.jsx)("div",{className:"align-self-flex-end navbar-collapse ".concat(p?"":"collapse"),children:(0,o.jsx)("ul",{className:"navbar-nav",children:c.map((function(e,t){var s=e.title,c=e.url;return(0,o.jsx)("li",{className:"nav-item",children:t===a?(0,o.jsx)("span",{style:{cursor:"pointer"},className:"active nav-link",children:s}):(0,o.jsx)(n.default,{href:c,passHref:!0,children:(0,o.jsx)("a",{className:"nav-link",children:s})})},s)}))})})]})})}},8515:function(e,a,t){"use strict";t.r(a),t.d(a,{Client:function(){return T},default:function(){return v}});var n=t(5671),s=t(3144),o=t(5785),c=t(7294),p=t(3349),r=t(6716),m=t(4975),k=t(4593),N=t(1655),l=t(9138),i=t(7462),u=t(4925),d=t(3905),y=["components"],h={};function f(e){var a=e.components,t=(0,u.Z)(e,y);return(0,d.kt)("wrapper",(0,i.Z)({},h,t,{components:a,mdxType:"MDXLayout"}),(0,d.kt)("hr",null),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"edit states in parallel without touching the other")),(0,d.kt)("p",null,"The actions are delayed with an ",(0,d.kt)("em",{parentName:"p"},"incomming message delay"),".",(0,d.kt)("br",{parentName:"p"}),"\n","When building a complex state that has to be calculated very often, efficiency is important.",(0,d.kt)("br",{parentName:"p"}),"\n","This example shows how to develop a state that only re-computes the part of the state that has to change due to the received action."),(0,d.kt)("h1",null,"Source Code"),(0,d.kt)("p",null,(0,d.kt)("a",{parentName:"p",href:"https://github.com/cocoss-org/co-consistent/blob/main/examples/pages/parallel.tsx"},(0,d.kt)("inlineCode",{parentName:"a"},"parallel.tsx"))),(0,d.kt)("pre",{className:"language-typescript"},(0,d.kt)("code",{parentName:"pre",className:"language-typescript"},"\n",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"type")," ",(0,d.kt)("span",{parentName:"code",className:"token class-name"},(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Event"))," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    action",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Action"),"\n    clientId",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token builtin"},"string"),"\n    time",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token builtin"},"number"),"\n",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,d.kt)("span",{parentName:"code",className:"token function"},"reduce"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"events",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Array"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Event"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," event",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Event"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Array"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Event"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,d.kt)("span",{parentName:"code",className:"token spread operator"},"..."),"events",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," event",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]"),"\n",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"class")," ",(0,d.kt)("span",{parentName:"code",className:"token class-name"},(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"ParallelState"))," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"implements")," ",(0,d.kt)("span",{parentName:"code",className:"token class-name"},(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"State"),(0,d.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Action"),(0,d.kt)("span",{parentName:"span",className:"token operator"},">"))," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token function"},"constructor"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token keyword"},"public")," x",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"public")," y",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    ",(0,d.kt)("span",{parentName:"code",className:"token function"},"update"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        base",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"this")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"|")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        deltaTime",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token builtin"},"number"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        action",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Action")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"|")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        prevDeltaTime",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token builtin"},"number")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"|")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        prevBase",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"this")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"|")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword nil"},"undefined"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"action",(0,d.kt)("span",{parentName:"code",className:"token operator"},"?."),"type ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"===")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"init"')," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"||")," base ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"==")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"action ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"==")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword null nil"},"null"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"x")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," base",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"x"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"y")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," base",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"y"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"base",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"x")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"!==")," prevBase",(0,d.kt)("span",{parentName:"code",className:"token operator"},"?."),"x",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"x")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," action",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"type")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"===")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"x++"')," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"?")," base",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"x")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"+")," ",(0,d.kt)("span",{parentName:"code",className:"token number"},"1")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," base",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"x"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"base",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"y")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"!==")," prevBase",(0,d.kt)("span",{parentName:"code",className:"token operator"},"?."),"y",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"y")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," action",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"type")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"===")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"y++"')," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"?")," base",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"y")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"+")," ",(0,d.kt)("span",{parentName:"code",className:"token number"},"1")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," base",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"y"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    ",(0,d.kt)("span",{parentName:"code",className:"token function"},"copyFrom"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"ref",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"x")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ref",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"x"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"this"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"y")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ref",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"y"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"type")," ",(0,d.kt)("span",{parentName:"code",className:"token class-name"},(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Action"))," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    type",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"x++"')," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"|")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"y++"')," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"|")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"init"'),"\n    id",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token builtin"},"number"),"\n",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,d.kt)("span",{parentName:"code",className:"token keyword module"},"export")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,d.kt)("span",{parentName:"code",className:"token function"},(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"View")),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    timeOffset",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    clientId",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    sendSubject",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    receiveObservable",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    timeOffset",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token builtin"},"number"),"\n    clientId",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token builtin"},"string"),"\n    sendSubject",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Subject"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Event"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n    receiveObservable",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Observable"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Event"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),"events",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," addEventToList",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token function"},"useReducer"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"reduce",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),"history",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," setHistory",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token generic-function"},(0,d.kt)("span",{parentName:"span",className:"token function"},"useState"),(0,d.kt)("span",{parentName:"span",className:"token generic class-name"},(0,d.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"span",className:"token known-class-name class-name"},"Array"),(0,d.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"HistoryEntry"),(0,d.kt)("span",{parentName:"span",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"ParallelState"),(0,d.kt)("span",{parentName:"span",className:"token punctuation"},",")," ",(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Action"),(0,d.kt)("span",{parentName:"span",className:"token operator"},">>>"))),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),"x",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," setX",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token function"},"useState"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token number"},"0"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),"y",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," setY",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token function"},"useState"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token number"},"0"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"const")," clock ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token function"},"useMemo"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,d.kt)("span",{parentName:"code",className:"token class-name"},(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Clock")),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"timeOffset",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"global",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"window")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"==")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword null nil"},"null")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"?")," ",(0,d.kt)("span",{parentName:"code",className:"token number"},"0")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token dom variable"},"window"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"performance"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"now"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),"timeOffset",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"const")," universe ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token function"},"useMemo"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"const")," ref ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,d.kt)("span",{parentName:"code",className:"token class-name"},(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"ParallelState")),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token number"},"0"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,d.kt)("span",{parentName:"code",className:"token number"},"0"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"const")," universe ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,d.kt)("span",{parentName:"code",className:"token class-name"},(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"Universe")),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,d.kt)("span",{parentName:"code",className:"token class-name"},(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"ParallelState")),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token number"},"0"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,d.kt)("span",{parentName:"code",className:"token number"},"0"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"a1",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," a2",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," a1",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"id")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"-")," a2",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"id"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token number"},"2000"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                universe",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"applyCurrentState"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"ref",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," clock",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"getCurrentTime"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,d.kt)("span",{parentName:"code",className:"token function"},"setHistory"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,d.kt)("span",{parentName:"code",className:"token spread operator"},"..."),"universe",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"history"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,d.kt)("span",{parentName:"code",className:"token function"},"setX"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"ref",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"x"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,d.kt)("span",{parentName:"code",className:"token function"},"setY"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"ref",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"y"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        universe",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"insert"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                id",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Math"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"random"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                type",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"init"'),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            clock",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"getCurrentTime"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token number"},"0"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,d.kt)("span",{parentName:"code",className:"token class-name"},(0,d.kt)("span",{parentName:"span",className:"token maybe-class-name"},"ParallelState")),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token number"},"0"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,d.kt)("span",{parentName:"code",className:"token number"},"0"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        universe",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"applyCurrentState"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"ref",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," clock",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"getCurrentTime"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token function"},"setX"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"ref",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"x"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token function"},"setY"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"ref",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"y"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," universe\n    ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),"clock",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," setX",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," setY",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," timeOffset",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," setHistory",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"const")," addEvent ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token function"},"useCallback"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"event",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Event"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token function"},"addEventToList"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"event",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"let")," currentTime ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," clock",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"getCurrentTime"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token keyword control-flow"},"if")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"event",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"time")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},">")," currentTime",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                clock",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"jump"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"event",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"time")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"-")," currentTime",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                currentTime ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," clock",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"getCurrentTime"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n            universe",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"insert"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"event",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"action"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," currentTime",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," event",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"time"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),"addEventToList",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," universe",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," clock",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"const")," createLocalEvent ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token function"},"useCallback"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"actionType",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"x++"')," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"|")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"y++"'),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"const")," event",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Event")," ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                clientId",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                time",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," clock",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"getCurrentTime"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                action",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                    type",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," actionType",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                    id",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token known-class-name class-name"},"Math"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"random"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n                ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token function"},"addEvent"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"event",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n            sendSubject",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"next"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"event",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),"clientId",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," clock",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," sendSubject",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," addEvent",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token function"},"useEffect"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"const")," subscription ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"=")," receiveObservable",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"subscribe"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"addEvent",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," subscription",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"unsubscribe"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"["),"addEvent",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," clientId",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"div className",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token string"},'"m-3"')," style",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{")," flexGrow",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token number"},"1")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"h1",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Client")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"clientId",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"h1",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Time")," ",(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Offset"),(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"timeOffset",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"br ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"br ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"button\n                className",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token string"},'"btn btn-outline-primary"'),"\n                style",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{")," padding",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"1rem"'),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," marginRight",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"1rem"')," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                onClick",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,d.kt)("span",{parentName:"code",className:"token function"},"createLocalEvent"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token string"},'"x++"'),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                x",(0,d.kt)("span",{parentName:"code",className:"token operator"},"++"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"button",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"button className",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token string"},'"btn btn-outline-primary"')," style",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{")," padding",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"1rem"')," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}")," onClick",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,d.kt)("span",{parentName:"code",className:"token function"},"createLocalEvent"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token string"},'"y++"'),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                y",(0,d.kt)("span",{parentName:"code",className:"token operator"},"++"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"button",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"h2 className",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token string"},'"mt-3"'),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),(0,d.kt)("span",{parentName:"code",className:"token constant"},"X"),(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"x",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"h2",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"h2 className",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token string"},'"mb-3"'),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),(0,d.kt)("span",{parentName:"code",className:"token constant"},"Y"),(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"y",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"h2",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"h2 className",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token string"},'"mt-3"'),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Events")," ",(0,d.kt)("span",{parentName:"code",className:"token keyword"},"in")," received order",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"h2",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"div style",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{")," maxHeight",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token number"},"200"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," overflowY",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"auto"')," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"events",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"map"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{")," clientId",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," time",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," action ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," i",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n                    ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"div key",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"i",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}")," style",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{")," marginBottom",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"2rem"'),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," display",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"flex"'),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," flexDirection",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"column"')," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                        ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"action",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"type"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                        ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"action id",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"action",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"id"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                        ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Client")," ",(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Id"),(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"clientId",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                        ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"State")," ",(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Time"),(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"time",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                    ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"h2 className",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token string"},'"mt-3"'),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Established")," ",(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"History"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"h2",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"div style",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{")," maxHeight",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token number"},"200"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," overflowY",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"auto"')," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"history",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token method function property-access"},"map"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{")," time",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," result ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," i",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,d.kt)("span",{parentName:"code",className:"token arrow operator"},"=>")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                    ",(0,d.kt)("span",{parentName:"code",className:"token keyword control-flow"},"return")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n                        ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"div key",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"i",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}")," style",(0,d.kt)("span",{parentName:"code",className:"token operator"},"="),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{")," marginBottom",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"2rem"'),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," display",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"flex"'),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," flexDirection",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token string"},'"column"')," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                                result",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," x",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"result",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"x"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},",")," y",(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"result",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,d.kt)("span",{parentName:"code",className:"token property-access"},"y"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n                            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"State")," ",(0,d.kt)("span",{parentName:"code",className:"token maybe-class-name"},"Time"),(0,d.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"time",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"span",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                        ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n                    ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n            ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n        ",(0,d.kt)("span",{parentName:"code",className:"token operator"},"<"),(0,d.kt)("span",{parentName:"code",className:"token operator"},"/"),"div",(0,d.kt)("span",{parentName:"code",className:"token operator"},">"),"\n    ",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,d.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n")))}f.isMDXComponent=!0;var b=t(5893);function v(){return(0,b.jsxs)("div",{className:"d-flex flex-column fullscreen",children:[(0,b.jsx)(N.h,{selectedIndex:1}),(0,b.jsxs)("div",{className:"d-flex flex-column justify-content-stretch container-lg",children:[(0,b.jsx)("div",{className:"d-flex flex-row-responsive",children:(0,b.jsx)(w,{})}),(0,b.jsx)(f,{}),(0,b.jsx)("div",{className:"p-3 flex-basis-0 flex-grow-1"})]}),(0,b.jsx)(l.$,{})]})}function w(){var e=(0,c.useMemo)((function(){return new r.x}),[]),a=(0,c.useMemo)((function(){return new Array(4).fill(null).map((function(a,t){var n="#".concat(t);return(0,b.jsx)(T,{clientId:n,timeOffset:Math.floor(1e3*Math.random()),receiveObservable:e.pipe((0,m.h)((function(e){return e.clientId!==n})),(0,k.g)(500+500*Math.random())),sendSubject:e},t)}))}),[e]);return(0,b.jsx)("div",{style:{fontFamily:"arial",flexWrap:"wrap",display:"flex",flexDirection:"row",justifyContent:"space-around"},children:a})}function g(e,a){return[].concat((0,o.Z)(e),[a])}var x=function(){function e(a,t){(0,n.Z)(this,e),this.x=a,this.y=t}return(0,s.Z)(e,[{key:"update",value:function(e,a,t,n,s){if("init"!==(null===t||void 0===t?void 0:t.type)&&null!=e){if(null==t)return this.x=e.x,void(this.y=e.y);e.x!==(null===s||void 0===s?void 0:s.x)&&(this.x="x++"===t.type?e.x+1:e.x),e.y!==(null===s||void 0===s?void 0:s.y)&&(this.y="y++"===t.type?e.y+1:e.y)}}},{key:"copyFrom",value:function(e){this.x=e.x,this.y=e.y}}]),e}();function T(e){var a=e.timeOffset,n=e.clientId,s=e.sendSubject,r=e.receiveObservable,m=(0,c.useReducer)(g,[]),k=m[0],N=m[1],l=(0,c.useState)([]),i=l[0],u=l[1],d=(0,c.useState)(0),y=d[0],h=d[1],f=(0,c.useState)(0),v=f[0],w=f[1],T=(0,c.useMemo)((function(){return new p.Clock(a,(function(){return null==t.g.window?0:window.performance.now()}))}),[a]),j=(0,c.useMemo)((function(){var e=new x(0,0),a=new p.Universe((function(){return new x(0,0)}),(function(e,a){return e.id-a.id}),2e3,(function(){a.applyCurrentState(e,T.getCurrentTime()),u((0,o.Z)(a.history)),h(e.x),w(e.y)}));return a.insert({id:Math.random(),type:"init"},T.getCurrentTime(),0,new x(0,0)),a.applyCurrentState(e,T.getCurrentTime()),h(e.x),w(e.y),a}),[T,h,w,a,u]),C=(0,c.useCallback)((function(e){N(e);var a=T.getCurrentTime();e.time>a&&(T.jump(e.time-a),a=T.getCurrentTime()),j.insert(e.action,a,e.time)}),[N,j,T]),S=(0,c.useCallback)((function(e){var a={clientId:n,time:T.getCurrentTime(),action:{type:e,id:Math.random()}};C(a),s.next(a)}),[n,T,s,C]);return(0,c.useEffect)((function(){var e=r.subscribe(C);return function(){return e.unsubscribe()}}),[C,n]),(0,b.jsxs)("div",{className:"m-3",style:{flexGrow:1},children:[(0,b.jsxs)("h1",{children:["Client ",n]}),(0,b.jsxs)("span",{children:["Time Offset: ",a]}),(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),(0,b.jsx)("button",{className:"btn btn-outline-primary",style:{padding:"1rem",marginRight:"1rem"},onClick:function(){return S("x++")},children:"x++"}),(0,b.jsx)("button",{className:"btn btn-outline-primary",style:{padding:"1rem"},onClick:function(){return S("y++")},children:"y++"}),(0,b.jsxs)("h2",{className:"mt-3",children:["X: ",y]}),(0,b.jsxs)("h2",{className:"mb-3",children:["Y: ",v]}),(0,b.jsx)("h2",{className:"mt-3",children:"Events in received order"}),(0,b.jsx)("div",{style:{maxHeight:200,overflowY:"auto"},children:k.map((function(e,a){var t=e.clientId,n=e.time,s=e.action;return(0,b.jsxs)("div",{style:{marginBottom:"2rem",display:"flex",flexDirection:"column"},children:[(0,b.jsx)("span",{children:s.type}),(0,b.jsxs)("span",{children:["action id: ",s.id]}),(0,b.jsxs)("span",{children:["Client Id: ",t]}),(0,b.jsxs)("span",{children:["State Time: ",n]})]},a)}))}),(0,b.jsx)("h2",{className:"mt-3",children:"Established History"}),(0,b.jsx)("div",{style:{maxHeight:200,overflowY:"auto"},children:i.map((function(e,a){var t=e.time,n=e.result;return(0,b.jsxs)("div",{style:{marginBottom:"2rem",display:"flex",flexDirection:"column"},children:[(0,b.jsxs)("span",{children:["result: x: ",n.x,", y: ",n.y]}),(0,b.jsxs)("span",{children:["State Time: ",t]})]},a)}))})]})}},9426:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/parallel",function(){return t(8515)}])}},function(e){e.O(0,[667,631,774,888,179],(function(){return a=9426,e(e.s=a);var a}));var a=e.O();_N_E=a}]);